
#Note:
# - wu_fetch.v - stop when pc >=50
# -  clock cycle is $time=1000
#
# Make sure to change PEArray/SIMULATION/common/TB_common.vh 
vim   ../../../PEArray/SIMULATION/common/TB_common.vh
#  `define TB_ENABLE_REGFILE_DRIVER
#  `undef  TB_ENABLE_REGFILE_DRIVER
vim   ../../../PEArray/HDL/common/pe_array.vh 
#  - 4-> 64
cp ../../../Manager/scripts/nocConfig_mesh2x2.txt ../../../Manager/scripts/nocConfig.txt
cp ../common/noc_interMgr_port_Bitmasks_2x2.vh ../../../Manager/HDL/common/noc_interMgr_port_Bitmasks.vh
cp inputFiles.2x2/* inputFiles/.

# restrict number of instructions
gvim inputFiles/manager_3_layer1_instruction_readmem.dat \
     inputFiles/manager_2_layer1_instruction_readmem.dat \
     inputFiles/manager_1_layer1_instruction_readmem.dat \
     inputFiles/manager_0_layer1_instruction_readmem.dat 

# placed these files in tmp/.



# back to 8x8
git checkout ../../../Manager/scripts/nocConfig.txt
git checkout ../../../Manager/HDL/common/noc_interMgr_port_Bitmasks.vh
git checkout ../../../PEArray/HDL/common/pe_array.vh 
cp inputFiles.8x8/* inputFiles/.

grep ERROR transcript ; grep PASS transcript | wc -l
echo 'Expect 20480'
#20480

grep 'Packet.*sent.*from' transcript  | wc -l ; grep 'Received.*expected packet' transcript  | wc -l
echo 'Expect 395 <cr> 395'
#395
#395

